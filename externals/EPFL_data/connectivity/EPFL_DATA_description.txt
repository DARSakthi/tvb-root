EPFL DATA 
Contact person: alessandra.griffa@epfl.ch

##----------------------------------------------------------------------------##
##                         File list & description                            ##
##----------------------------------------------------------------------------##

File : PH0039_1015ROIs_T1Space.nii.gz
Description : 1015 ROI parcellation Nifti volumes for one subject in T1 space.


File : PH0039_83ROIs_T1Space.nii.gz
Description : 83 ROI parcellation Nifti volumes for one subject in T1 space.

File : PH0039_1015ROIs_DiffusionSpace.nii.gz 
Description: 1015 ROI parcellation Nifti volumes for one subject in diffusion space.

File : PH0039_83ROIs_DiffusionSpace.nii.gz 
Description: 83 ROI parcellation Nifti volumes for one subject in diffusion space.


File:  ROIs_mapping_ParcellationLausanne2008.xls
Description: The mapping from the 83 to the 1015 ROI parcellation. The 83 ROIs
parcellations is not an average of the high resolution parcellation. They have
been done separately. Anatomical labels are here.

File: diffusion_connectivity_data_04022014.mat
Description: Structural connectivity matrices (from DSI data) This file includes the
connection-wise average length, number of fibers and connectivity density. In
addition there are subjects age and gender, plus a subjects reference code in
order to identify each individual.

Load in the file in Matlab:

L         : cell    : connection wise average length : L{1} 83 ROIs; L{2} 1015 ROIs
SC_density: cell    : connectivity density
SC_number : cell    : number of fibers
age       : double  : subjects age
code      : cell    : subjects reference code
gender    : cell    : subjects gender

##----------------------------------------------------------------------------##
File: centroids_04022014.mat
Description: the centroids have been computed from the parcellation Nifti volumes (similar to
the file PH0039_83ROIs_T1Space.nii.gz), so they are in the subjects T1 space.
Some regions may not exist for higher resolution. This means that the sum of the
corresponding column in the connectivity matrix will be zero, and that the
corresponding centroid coordinates will be [0,0,0]. In practice, we have a 1015
ROIs atlas that we fit to the individual subjects space; because of the
dimension of the brain some regions may become too small and not represented for
a particular subject. When plotting the centroids with scatter3, you will see
the right hemisphere (first half of the regions) looking like a left hemisphere
and vice versa. This is because in our case the FreeSurfer output is in
radiological convention.
Trick: You can flip the x axis for representation in neurological convention.

NOTE: Looking at the distribution of connection-wise average lengths, I
noticed that there are lengths > 250 (mm). In fact the maximum value is
around 441. Concerning the fiber length, after tractography we discard streamlines shorter
than 8 mm or longer the 500 mm. **Connections with high fiber length are
probably spurious**. Tough, we do not have an exact criteria to identify false
positive on the basis of the fiber length. A combination of a high fiber
length and a low streamlines number could be an indicator of false positive.
Personally, in order to limit false positive and when working with a single
group of subject, I discard connections which are not present in at least a
certain percentage (e.g. 75%) of the subjects, knowing that this percentage
should be relaxed in the case of high resolution parcellation.

Load in the file in Matlab:

centroids : cell    : centroids{1}: 83 ROIs centres; centroids{5} 1015 ROIs centres.

##----------------------------------------------------------------------------##
File: diffusion_connectivity_data_04022014.mat

Description: The fMRI preprocessing steps applied are the following:
- slice timing (FSL slicetimer)
- motion correction (FSL mcflirt)
- discard first 4 time points
- linear regression of nuisance signals (6 motion signals estimated by FSL mcflirt, average CSF signal, average WM signal)
- linear detrending 
- low-pass filtering (fslmaths -bptf -1 1)

##----------------------------------------------------------------------------##
File: *.annot

There is a little trick with the annotation files for the 1015 parcellation.
The information is split into three different files which contain the labels
for subsets of the total number of regions.

## ---------------------------------------------------------------------------##
##                         Additional information                             ##
##----------------------------------------------------------------------------##

## PARCELLATION:

NOTE: The structural connectiviy matrices include subcortical structures 7 per
hemisphere + the brain stem. They are the same structures for both
parcellations. 

The multi-scale parcellation includes 1015 (1000 cortical ROIs + 14 subcortical
ROIs + brain stem) and 83 (68 cortical ROIs + 14 subcortical ROIs + brain stem)
regions. The reason for the differences 1000/998 and68/66 (old datasets) regions
is because insula has been added as well.

## CONNECTIVITY MATRICES

The connectomes are built in the subject space. **Segmentation and parcellation
are performed on the T1 volume**. The T1 volume is registered to the subject
diffusion space and the transformation is applied to the parcellation previously
computed. For each subject we therefore have the coordinates of the ROIs in the
subject space (T1 space or diffusion space). The subjects are not registered
between them. Do you think this will be a problem? We run FreeSurfer on all our
subjects, I guess we can get a conversion to the Talaraich or MNI space of the
ROIs mesh with some FreeSurfer command (probably it will not be possible for the
subcortical nuclei).

## 40 subjects


##DIFFUSION DATA:

Concerning the diffusion data, DSI-q4half raw data (1 b0 volume, max b-value
8000 s/mm²) are reconstructed using DTK odf_recon and according to
http://onlinelibrary.wiley.com/doi/10.1002/mrm.20642/full . Note that no motion
correction or eddy current correction are applied. Deterministic streamline
tractography (32 seeds per voxel, angular threshold 60°) is performed on
reconstructed DSI data and within the WM volume. Connectivity matrices are
evaluated by combining tractography results and cortical-subcortical
parcellation.


## FUNCTIONAL DATA:

Concerning the functional data, these are the pre-processing steps Alessandra applied: 
	1- slice timing (FSL slicetimer)
	2- motion correction (FSL realignment to the middle volume, 6 DOF) 
	3- discard first 4 time points in order to obtain a stable resting state
	4- nuisance signals linear regression (average WM signal, average CSF signal, 6 estimated movement signals -3 translations, 3 rotations-)
	5- linear detrending
	6- low-pass filtering (note that our TR is 1.92 s. I usually low-pass filter the voxel-wise time series to f<= 0.1 Hz).
	7- average the voxel-wise time series in order to get ROI-wise time series


## ---------------------------------------------------------------------------##
##          Corrections made to the connectivity matrices                     ##
##----------------------------------------------------------------------------##
** Corrections:

 + what: remove all connections that are further than 250 mm.
 + why : based on the histograms of lengths, and estimated pdfs, those
         connections are most likely spurious

 + what: remove connections that are not present in at least 75% of 
         the subjects, or 50% for the high resolution parcellation. 
 + why:  it's an arbitrary threshold to clean up data from false positives.

 + what: scaled densities to the interval [0, 1], using the min max of the
         whole datasets (all subjects)
 + why : scales up the values that were very low, preserves individual weights
         distribution and preserves inter-subject variability.

 

